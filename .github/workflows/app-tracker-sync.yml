name: Sync App Progress Tracker
  on:
    workflow_dispatch:  # Manual trigger
    schedule:
      - cron: '0 8 * * *'  # Daily at 8 AM

  jobs:
    sync-app-tracker:
      name: Update App Progress Tracker
      runs-on: ubuntu-latest
      permissions:
        contents: write
      steps:
        - name: Checkout repository
          uses: actions/checkout@v3

        - name: Create/Update App Tracker
          run: |
            # Create the app tracker file with current data
            cat > app-progress-tracker.md << 'EOF'
            # ðŸš€ Kevin's App Progress Tracker

            *Last Updated: $(date '+%B %d, %Y')*

            ---

            ## ðŸ“‹ **QUICK CHECKLIST - ALL APPS**

            ### âœ… **Ready to Ship** (3)
            - [ ] ðŸŽ¯ **VibeCode Platform** - 80% - Production ready, scaling
            - [ ] â° **Tabata Timer** - 80% - Working prototype, needs polish
            - [ ] ðŸ•·ï¸ **Content Scraper** - 70% - Functional utility tools

            ### ðŸ”„ **In Active Development** (6)
            - [ ] ðŸŽ **FoodTrackerApp** - 60% - Feature complete, needs persistence
            - [ ] ðŸ“š **BookMatch** - 30% - Early development phase
            - [ ] ðŸ“§ **SimpleSend** - 50% - MVP ready, needs backend
            - [ ] ðŸŒ **Static Site Generator** - 60% - Working blog engine
            - [ ] ðŸ‘® **Cop Lingo Training** - 30% - Structure built, needs content
            - [ ] ðŸŒŠ **VibeThis Trend Tracker** - 40% - Proof of concept

            ### ðŸ§ª **Experimental/Planning** (3)
            - [ ] âœï¸ **Content Remixer** - 20% - Basic setup phase
            - [ ] ðŸŽ™ï¸ **Vibecaster** - 10% - Concept stage
            - [ ] ðŸ”§ **TidyTop** - Unknown% - Mac productivity app

            ---

            ## ðŸŽ¯ **30-60-90 DAY PLAN**

            ### ðŸ“… **Next 30 Days**
            1. ðŸš€ **Ship Tabata Timer** - Add final features and deploy
            2. ðŸŽ **Complete FoodTracker** - Add persistence layer
            3. ðŸŽ¯ **Scale VibeCode** - Focus on user growth

            ### ðŸ“… **Next 60 Days**
            4. ðŸ“š **Advance BookMatch** - Core recommendation engine
            5. ðŸ“§ **Launch SimpleSend** - Email service integration
            6. ðŸŒŠ **Validate VibeThis** - Market research and MVP

            ---

            **Focus Philosophy**: *Ship the ready, build the promising, research the future* ðŸš€
            EOF

        - name: Check if file changed
          id: check_changes
          run: |
            if git diff --quiet app-progress-tracker.md; then
              echo "changed=false" >> $GITHUB_OUTPUT
            else
              echo "changed=true" >> $GITHUB_OUTPUT
            fi

        - name: Commit and push changes
          if: steps.check_changes.outputs.changed == 'true'
          run: |
            git config --local user.email "action@github.com"
            git config --local user.name "App Tracker Bot"
            git add app-progress-tracker.md
            git commit -m "ðŸš€ Auto-update app progress tracker - $(date '+%Y-%m-%d')"
            git push
